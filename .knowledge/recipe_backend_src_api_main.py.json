{"is_source_file": true, "format": "Python (FastAPI/Pydantic)", "description": "This is the main source file for the Recipe Explorer backend API, defining the API endpoints, data models, and in-memory data store. It includes schema definitions for recipes, health check, and CRUD operations for recipes, along with seed data for initial testing.", "external_files": ["fastapi", "pydantic", "datetime"], "external_methods": ["fastapi.FastAPI", "fastapi.HTTPException", "fastapi.Path", "fastapi.Body", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field", "pydantic.HttpUrl", "datetime.datetime"], "published": ["app", "_db", "_next_id", "_ensure_seed", "health_check", "list_recipes", "get_recipe", "create_recipe", "update_recipe", "patch_recipe", "delete_recipe", "RecipeBase", "RecipeCreate", "RecipeUpdate", "Recipe"], "classes": [{"name": "RecipeBase", "description": "Base schema for Recipe input fields shared across create and update."}, {"name": "RecipeCreate", "description": "Schema for creating a new recipe."}, {"name": "RecipeUpdate", "description": "Schema for updating an existing recipe (partial updates supported)."}, {"name": "Recipe", "description": "Recipe schema returned by the API with server-managed fields."}], "methods": [{"name": "int _next_id()", "description": "Generate the next recipe ID.", "scope": "", "scopeKind": ""}, {"name": "datetime _now()", "description": "Get current UTC datetime.", "scope": "", "scopeKind": ""}, {"name": "None _ensure_seed()", "description": "Initialize the sample recipe in the in-memory database if empty.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Health check endpoint to verify service is operational.", "scope": "", "scopeKind": ""}, {"name": "List[Recipe] list_recipes()", "description": "Retrieve a list of all recipes.", "scope": "", "scopeKind": ""}, {"name": "Recipe get_recipe( recipe_id: int = Path(..., description=\"The ID of the recipe to retrieve\", ge=1) )", "description": "Retrieve a specific recipe by ID.", "scope": "", "scopeKind": ""}, {"name": "Recipe create_recipe(payload: RecipeCreate = Body(..., description=\"Recipe data for creation\"))", "description": "Create a new recipe and store it.", "scope": "", "scopeKind": ""}, {"name": "Recipe update_recipe( recipe_id: int = Path(..., description=\"The ID of the recipe to update\", ge=1), payload: RecipeCreate = Body(..., description=\"New data to replace the existing recipe\"), )", "description": "Replace an existing recipe with new data.", "scope": "", "scopeKind": ""}, {"name": "Recipe patch_recipe( recipe_id: int = Path(..., description=\"The ID of the recipe to patch\", ge=1), payload: RecipeUpdate = Body(..., description=\"Fields to update on the recipe\"), )", "description": "Partially update an existing recipe.", "scope": "", "scopeKind": ""}, {"name": "dict delete_recipe( recipe_id: int = Path(..., description=\"The ID of the recipe to delete\", ge=1) )", "description": "Remove a recipe by ID.", "scope": "", "scopeKind": ""}], "calls": ["app.get(\"/\")", "app.get(\"/recipes\")", "app.get(\"/recipes/{recipe_id}\")", "app.post(\"/recipes\")", "app.put(\"/recipes/{recipe_id}\")", "app.patch(\"/recipes/{recipe_id}\")", "app.delete(\"/recipes/{recipe_id}\")"], "search-terms": ["FastAPI", "Recipe API", "In-memory storage", "CRUD recipes", "pydantic models", "Health check endpoint", "seed data", "recipe schemas"], "state": 2, "file_id": 2, "knowledge_revision": 10, "git_revision": "71aaba92647519f46c36e9b037ab116db6818043", "revision_history": [{"9": "71aaba92647519f46c36e9b037ab116db6818043"}, {"10": "71aaba92647519f46c36e9b037ab116db6818043"}], "ctags": [{"_type": "tag", "name": "Recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^class Recipe(RecipeBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RecipeBase", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^class RecipeBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RecipeCreate", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^class RecipeCreate(RecipeBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RecipeUpdate", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^class RecipeUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_db", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^_db: Dict[int, Recipe] = {}$/", "language": "Python", "typeref": "typename:Dict[int, Recipe]", "kind": "variable"}, {"_type": "tag", "name": "_ensure_seed", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^def _ensure_seed() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_id_counter", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^_id_counter: int = 0$/", "language": "Python", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "_next_id", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^def _next_id() -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_now", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^def _now() -> datetime:$/", "language": "Python", "typeref": "typename:datetime", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "cook_time_minutes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    cook_time_minutes: Optional[int] = Field(None, description=\"Cooking time in minutes\", ge=0)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "RecipeBase", "scopeKind": "class"}, {"_type": "tag", "name": "cook_time_minutes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    cook_time_minutes: Optional[int] = Field(None, description=\"Cooking time in minutes\", ge=0)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "RecipeUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "create_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^def create_recipe(payload: RecipeCreate = Body(..., description=\"Recipe data for creation\")) -> /", "language": "Python", "typeref": "typename:Recipe", "kind": "function", "signature": "(payload: RecipeCreate = Body(..., description=\"Recipe data for creation\"))"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    created_at: datetime = Field(..., description=\"Timestamp when the recipe was created\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "delete_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^def delete_recipe($/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "( recipe_id: int = Path(..., description=\"The ID of the recipe to delete\", ge=1) )"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"A brief description of the recipe\", ma/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "RecipeBase", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    description: Optional[str] = Field(None, description=\"A brief description of the recipe\", ma/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "RecipeUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "get_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^def get_recipe($/", "language": "Python", "typeref": "typename:Recipe", "kind": "function", "signature": "( recipe_id: int = Path(..., description=\"The ID of the recipe to retrieve\", ge=1) )"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    id: int = Field(..., description=\"Unique identifier of the recipe\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}, {"_type": "tag", "name": "image_url", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    image_url: Optional[HttpUrl] = Field(None, description=\"Optional image illustrating the reci/", "language": "Python", "typeref": "typename:Optional[HttpUrl]", "kind": "variable", "scope": "RecipeBase", "scopeKind": "class"}, {"_type": "tag", "name": "image_url", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    image_url: Optional[HttpUrl] = Field(None, description=\"Optional image illustrating the reci/", "language": "Python", "typeref": "typename:Optional[HttpUrl]", "kind": "variable", "scope": "RecipeUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "ingredients", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    ingredients: List[str] = Field(default_factory=list, description=\"List of ingredients requir/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "RecipeBase", "scopeKind": "class"}, {"_type": "tag", "name": "ingredients", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    ingredients: Optional[List[str]] = Field(None, description=\"List of ingredients required for/", "language": "Python", "typeref": "typename:Optional[List[str]]", "kind": "variable", "scope": "RecipeUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "list_recipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^def list_recipes() -> List[Recipe]:$/", "language": "Python", "typeref": "typename:List[Recipe]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "patch_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^def patch_recipe($/", "language": "Python", "typeref": "typename:Recipe", "kind": "function", "signature": "( recipe_id: int = Path(..., description=\"The ID of the recipe to patch\", ge=1), payload: RecipeUpdate = Body(..., description=\"Fields to update on the recipe\"), )"}, {"_type": "tag", "name": "prep_time_minutes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    prep_time_minutes: Optional[int] = Field(None, description=\"Preparation time in minutes\", ge/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "RecipeBase", "scopeKind": "class"}, {"_type": "tag", "name": "prep_time_minutes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    prep_time_minutes: Optional[int] = Field(None, description=\"Preparation time in minutes\", ge/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "RecipeUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "servings", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    servings: Optional[int] = Field(None, description=\"Number of servings\", ge=1)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "RecipeBase", "scopeKind": "class"}, {"_type": "tag", "name": "servings", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    servings: Optional[int] = Field(None, description=\"Number of servings\", ge=1)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "RecipeUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "steps", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    steps: List[str] = Field(default_factory=list, description=\"Ordered list of cooking steps\\/i/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "RecipeBase", "scopeKind": "class"}, {"_type": "tag", "name": "steps", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    steps: Optional[List[str]] = Field(None, description=\"Ordered list of cooking steps\\/instruc/", "language": "Python", "typeref": "typename:Optional[List[str]]", "kind": "variable", "scope": "RecipeUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    title: Optional[str] = Field(None, description=\"The title of the recipe\", min_length=1, max_/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "RecipeUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"The title of the recipe\", min_length=1, max_length=200)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "RecipeBase", "scopeKind": "class"}, {"_type": "tag", "name": "update_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^def update_recipe($/", "language": "Python", "typeref": "typename:Recipe", "kind": "function", "signature": "( recipe_id: int = Path(..., description=\"The ID of the recipe to update\", ge=1), payload: RecipeCreate = Body(..., description=\"New data to replace the existing recipe\"), )"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/recipe-explorer-187146-187164/recipe_backend/src/api/main.py", "pattern": "/^    updated_at: datetime = Field(..., description=\"Timestamp when the recipe was last updated\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "Recipe", "scopeKind": "class"}], "hash": "75bc02c0400e0f67a5a62a69795ef0a9", "format-version": 4, "code-base-name": "recipe_backend", "filename": "recipe_backend/src/api/main.py", "fields": [{"name": "Dict[int, Recipe] _db", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int _id_counter", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[int] cook_time_minutes", "scope": "RecipeBase", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime created_at", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "RecipeBase", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[HttpUrl] image_url", "scope": "RecipeBase", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] ingredients", "scope": "RecipeBase", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[List[str]] ingredients", "scope": "RecipeUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[int] prep_time_minutes", "scope": "RecipeBase", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] servings", "scope": "RecipeBase", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] steps", "scope": "RecipeBase", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[List[str]] steps", "scope": "RecipeUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] title", "scope": "RecipeUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "RecipeBase", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime updated_at", "scope": "Recipe", "scopeKind": "class", "description": "unavailable"}]}